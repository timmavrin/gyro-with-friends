class t{constructor(){this._isCalibrating=!1,this.isCalibrating=()=>this._isCalibrating,this.betaPercent=0,this.gammaPercent=0,this.beta=0,this.betaOffset=0,this.betaMax=45,this.gamma=0,this.gammaOffset=0,this.gammaMax=45,this.calibrateCenter(),window.addEventListener("deviceorientation",this.listenToOrientation.bind(this),!0)}[Symbol.dispose](){window.removeEventListener("deviceorientation",this.listenToOrientation.bind(this),!0)}listenToOrientation(t){t.beta&&t.gamma&&(this.beta=t.beta-this.betaOffset,this.beta>180?this.beta=-180-this.beta:this.beta<-180&&(this.beta=-(180-this.beta)),this.gamma=t.gamma-this.gammaOffset,this.gamma>90?this.gamma=-90-this.gamma:this.gamma<-90&&(this.gamma=-(90-this.gamma)),this.betaPercent=0,this.beta<0?this.betaPercent=Math.max(-this.betaMax,this.beta)/this.betaMax:this.beta>0&&(this.betaPercent=Math.min(this.betaMax,this.beta)/this.betaMax),this.gammaPercent=0,this.gamma<0?this.gammaPercent=Math.max(-this.gammaMax,this.gamma)/this.gammaMax:this.gamma>0&&(this.gammaPercent=Math.min(this.gammaMax,this.gamma)/this.gammaMax))}calibrateCenter(){window.addEventListener("deviceorientation",t=>{this.betaOffset=t.beta??0,this.gammaOffset=t.gamma??0},{once:!0})}startCalibration(){this._isCalibrating=!0,this.calibrateCenter(),this.betaMax=5,this.gammaMax=5}endCalibration(){this._isCalibrating=!1}calibrateMax(){this.betaMax=Math.max(this.betaMax,Math.abs(this.beta)),this.gammaMax=Math.max(this.gammaMax,Math.abs(this.gamma))}}const a=new t,e=new class{constructor(){this.squarePixels=1e3,this.isDrawing=!1,this.color="rgb(0,0,0)";let t=document.createElement("canvas"),a=document.createElement("canvas");this.drawCtx=t.getContext("2d"),this.pointerCtx=a.getContext("2d"),t.height=t.width=a.height=a.width=this.squarePixels,t.className=a.className="canvas",t.id="canvas",a.id="pointerCanvas"}registerParent(t){if(t){let a=Math.min(window.innerHeight,window.innerWidth);t.style.setProperty("--canvas-size",a+"px"),t.appendChild(this.drawCtx.canvas),t.appendChild(this.pointerCtx.canvas)}}};window.onload=()=>{e.registerParent(document.querySelector("#canvas-container"));let t=document.querySelector("#draw-button");t?.addEventListener("touchstart",t=>{e.isDrawing=!0,e.color=i(t.touches[0].clientX)}),t?.addEventListener("touchmove",t=>{e.color=i(t.touches[0].clientX)}),t?.addEventListener("touchend",()=>{e.isDrawing=!1}),document.querySelector("#calibrate-button")?.addEventListener("touchstart",t=>{a.startCalibration()}),document.querySelector("#calibrate-button")?.addEventListener("touchend",t=>{a.endCalibration()}),window.requestAnimationFrame(s)};const i=t=>`hsl(${360*t/window.innerWidth} 100 50)`,s=()=>{if(a.isCalibrating())a.calibrateMax();else{let t=e.squarePixels/2,i=e.squarePixels/2,s=t+e.squarePixels*a.gammaPercent/2,n=i+e.squarePixels*a.betaPercent/2;e.isDrawing&&(e.drawCtx.beginPath(),e.drawCtx.arc(s,n,5,0,2*Math.PI,!0),e.drawCtx.fillStyle=e.color,e.drawCtx.fill()),e.pointerCtx.clearRect(0,0,e.squarePixels,e.squarePixels),e.pointerCtx.beginPath(),e.pointerCtx.arc(s,n,20,0,2*Math.PI,!0),e.pointerCtx.strokeStyle="#333",e.pointerCtx.stroke(),e.pointerCtx.beginPath(),e.pointerCtx.arc(s,n,5,0,2*Math.PI,!0),e.pointerCtx.fillStyle="#000",e.pointerCtx.fill()}window.requestAnimationFrame(s)};
//# sourceMappingURL=index.db0a803a.js.map
