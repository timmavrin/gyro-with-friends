class t{constructor(){this._isCalibrating=!1,this.isCalibrating=()=>this._isCalibrating,this.betaPercent=0,this.gammaPercent=0,this.beta=0,this.betaOffset=0,this.betaMax=45,this.gamma=0,this.gammaOffset=0,this.gammaMax=45,this.calibrateCenter(),"requestPermission"in DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(t=>{"granted"===t&&window.addEventListener("deviceorientation",this.listenToOrientation.bind(this),!0)}):window.addEventListener("deviceorientation",this.listenToOrientation.bind(this),!0)}[Symbol.dispose](){window.removeEventListener("deviceorientation",this.listenToOrientation.bind(this),!0)}listenToOrientation(t){t.beta&&t.gamma&&(this.beta=t.beta-this.betaOffset,this.beta>180?this.beta=-180-this.beta:this.beta<-180&&(this.beta=-(180-this.beta)),this.gamma=t.gamma-this.gammaOffset,this.gamma>90?this.gamma=-90-this.gamma:this.gamma<-90&&(this.gamma=-(90-this.gamma)),this.betaPercent=0,this.beta<0?this.betaPercent=Math.max(-this.betaMax,this.beta)/this.betaMax:this.beta>0&&(this.betaPercent=Math.min(this.betaMax,this.beta)/this.betaMax),this.gammaPercent=0,this.gamma<0?this.gammaPercent=Math.max(-this.gammaMax,this.gamma)/this.gammaMax:this.gamma>0&&(this.gammaPercent=Math.min(this.gammaMax,this.gamma)/this.gammaMax))}calibrateCenter(){window.addEventListener("deviceorientation",t=>{this.betaOffset=t.beta??0,this.gammaOffset=t.gamma??0},{once:!0})}startCalibration(){this._isCalibrating=!0,this.calibrateCenter(),this.betaMax=5,this.gammaMax=5}endCalibration(){this._isCalibrating=!1}calibrateMax(){this.betaMax=Math.max(this.betaMax,Math.abs(this.beta)),this.gammaMax=Math.max(this.gammaMax,Math.abs(this.gamma))}}const e=new t,a=new class{constructor(){this.squarePixels=1e3,this.isDrawing=!1,this.color="rgb(0,0,0)";let t=document.createElement("canvas"),e=document.createElement("canvas");this.drawCtx=t.getContext("2d"),this.pointerCtx=e.getContext("2d"),t.height=t.width=e.height=e.width=this.squarePixels,t.className=e.className="canvas",t.id="canvas",e.id="pointerCanvas"}registerParent(t){if(t){let e=Math.min(window.innerHeight,window.innerWidth);t.style.setProperty("--canvas-size",e+"px"),t.appendChild(this.drawCtx.canvas),t.appendChild(this.pointerCtx.canvas)}}};window.onload=()=>{a.registerParent(document.querySelector("#canvas-container"));let t=document.querySelector("#draw-button");t?.addEventListener("touchstart",t=>{a.isDrawing=!0,a.color=i(t.touches[0].clientX)}),t?.addEventListener("touchmove",t=>{a.color=i(t.touches[0].clientX)}),t?.addEventListener("touchend",()=>{a.isDrawing=!1}),document.querySelector("#calibrate-button")?.addEventListener("touchstart",t=>{e.startCalibration()}),document.querySelector("#calibrate-button")?.addEventListener("touchend",t=>{e.endCalibration()}),window.requestAnimationFrame(s)};const i=t=>`hsl(${360*t/window.innerWidth} 100 50)`,s=()=>{if(e.isCalibrating())e.calibrateMax();else{let t=a.squarePixels/2,i=a.squarePixels/2,s=t+a.squarePixels*e.gammaPercent/2,n=i+a.squarePixels*e.betaPercent/2;a.isDrawing&&(a.drawCtx.beginPath(),a.drawCtx.arc(s,n,5,0,2*Math.PI,!0),a.drawCtx.fillStyle=a.color,a.drawCtx.fill()),a.pointerCtx.clearRect(0,0,a.squarePixels,a.squarePixels),a.pointerCtx.beginPath(),a.pointerCtx.arc(s,n,20,0,2*Math.PI,!0),a.pointerCtx.strokeStyle="#333",a.pointerCtx.stroke(),a.pointerCtx.beginPath(),a.pointerCtx.arc(s,n,5,0,2*Math.PI,!0),a.pointerCtx.fillStyle="#000",a.pointerCtx.fill()}window.requestAnimationFrame(s)};
//# sourceMappingURL=index.5a671724.js.map
