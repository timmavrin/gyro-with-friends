{"mappings":"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","sources":["<anon>","src/index.ts","src/gyro.ts","src/gyroCanvas.ts"],"sourcesContent":["class $de721603b3081a12$export$2f471b5aa48f9e76 {\n    constructor(){\n        this.isCalibrating = false;\n        this.isDrawing = false;\n        this.betaOffset = 0;\n        this.gammaOffset = 0;\n        this.betaMax = 45;\n        this.gammaMax = 45;\n        this.beta = 0;\n        this.gamma = 0;\n        this.betaPercent = 0;\n        this.gammaPercent = 0;\n        this.calibrateCenter();\n        window.addEventListener(\"deviceorientation\", (e)=>{\n            if (e.beta && e.gamma) {\n                this.beta = e.beta - this.betaOffset;\n                if (this.beta > 180) this.beta = -180 - this.beta;\n                else if (this.beta < -180) this.beta = -(180 - this.beta);\n                this.gamma = e.gamma - this.gammaOffset;\n                if (this.gamma > 90) this.gamma = -90 - this.gamma;\n                else if (this.gamma < -90) this.gamma = -(90 - this.gamma);\n                this.betaPercent = 0;\n                if (this.beta < 0) this.betaPercent = Math.max(-this.betaMax, this.beta) / this.betaMax;\n                else if (this.beta > 0) this.betaPercent = Math.min(this.betaMax, this.beta) / this.betaMax;\n                this.gammaPercent = 0;\n                if (this.gamma < 0) this.gammaPercent = Math.max(-this.gammaMax, this.gamma) / this.gammaMax;\n                else if (this.gamma > 0) this.gammaPercent = Math.min(this.gammaMax, this.gamma) / this.gammaMax;\n            }\n        }, false);\n    }\n    calibrateCenter() {\n        window.addEventListener(\"deviceorientation\", (e)=>{\n            this.betaOffset = e.beta ?? 0;\n            this.gammaOffset = e.gamma ?? 0;\n        }, {\n            once: true\n        });\n    }\n    calibrateMax() {\n        this.betaMax = Math.max(this.betaMax, Math.abs(this.betaMax));\n        this.gammaMax = Math.max(this.gammaMax, Math.abs(this.gammaMax));\n    }\n}\n\n\nclass $1a69b22be1d9263e$export$2367fe50a6a20d49 {\n    constructor(){\n        this.squarePixels = 1000;\n        this.registerParent = (parent)=>{\n            if (parent) {\n                const parentElement = parent;\n                const cssSize = Math.min(window.innerHeight, window.innerWidth);\n                parentElement.style.setProperty(\"--canvas-size\", cssSize + \"px\");\n                parent.appendChild(this.drawCtx.canvas);\n                parent.appendChild(this.pointerCtx.canvas);\n            }\n        };\n        const drawLayer = document.createElement(\"canvas\");\n        const pointerLayer = document.createElement(\"canvas\");\n        this.drawCtx = drawLayer.getContext(\"2d\");\n        this.pointerCtx = pointerLayer.getContext(\"2d\");\n        // Assign canvas pixel size\n        drawLayer.height = drawLayer.width = pointerLayer.height = pointerLayer.width = this.squarePixels;\n        drawLayer.className = pointerLayer.className = \"canvas\";\n        drawLayer.id = \"canvas\";\n        pointerLayer.id = \"pointerCanvas\";\n    }\n}\n\n\nconst $1e6a16da88d577c6$var$_gyroRef = new (0, $de721603b3081a12$export$2f471b5aa48f9e76)();\nconst $1e6a16da88d577c6$var$_canvas = new (0, $1a69b22be1d9263e$export$2367fe50a6a20d49)();\nwindow.onload = ()=>{\n    $1e6a16da88d577c6$var$_canvas.registerParent(document.querySelector(\"#canvas-container\"));\n    document.querySelector(\"#draw-button\")?.addEventListener(\"pointerdown\", (e)=>{\n        $1e6a16da88d577c6$var$_gyroRef.isDrawing = true;\n    });\n    document.querySelector(\"#draw-button\")?.addEventListener(\"pointerleave\", (e)=>{\n        $1e6a16da88d577c6$var$_gyroRef.isDrawing = false;\n    });\n    document.querySelector(\"#calibrate-button\")?.addEventListener(\"pointerdown\", (e)=>{\n        $1e6a16da88d577c6$var$_gyroRef.betaMax = 0;\n        $1e6a16da88d577c6$var$_gyroRef.gammaMax = 0;\n        $1e6a16da88d577c6$var$_gyroRef.isCalibrating = true;\n    });\n    document.querySelector(\"#calibrate-button\")?.addEventListener(\"pointerleave\", (e)=>{\n        $1e6a16da88d577c6$var$_gyroRef.isCalibrating = false;\n    });\n    window.requestAnimationFrame($1e6a16da88d577c6$var$draw);\n};\nconst $1e6a16da88d577c6$var$draw = ()=>{\n    if ($1e6a16da88d577c6$var$_gyroRef.isCalibrating) $1e6a16da88d577c6$var$_gyroRef.calibrateMax();\n    let centerX = $1e6a16da88d577c6$var$_canvas.squarePixels / 2;\n    let centerY = $1e6a16da88d577c6$var$_canvas.squarePixels / 2;\n    let xPos = centerX + $1e6a16da88d577c6$var$_canvas.squarePixels * $1e6a16da88d577c6$var$_gyroRef.gammaPercent / 2;\n    let yPos = centerY + $1e6a16da88d577c6$var$_canvas.squarePixels * $1e6a16da88d577c6$var$_gyroRef.betaPercent / 2;\n    if ($1e6a16da88d577c6$var$_gyroRef.isDrawing) {\n        $1e6a16da88d577c6$var$_canvas.drawCtx.beginPath();\n        $1e6a16da88d577c6$var$_canvas.drawCtx.arc(xPos, yPos, 5, 0, 2 * Math.PI, true);\n        $1e6a16da88d577c6$var$_canvas.drawCtx.fillStyle = \"#000\";\n        $1e6a16da88d577c6$var$_canvas.drawCtx.fill();\n    }\n    $1e6a16da88d577c6$var$_canvas.pointerCtx.clearRect(0, 0, $1e6a16da88d577c6$var$_canvas.squarePixels, $1e6a16da88d577c6$var$_canvas.squarePixels);\n    $1e6a16da88d577c6$var$_canvas.pointerCtx.beginPath();\n    $1e6a16da88d577c6$var$_canvas.pointerCtx.arc(xPos, yPos, 20, 0, 2 * Math.PI, true);\n    $1e6a16da88d577c6$var$_canvas.pointerCtx.strokeStyle = \"#333\";\n    $1e6a16da88d577c6$var$_canvas.pointerCtx.stroke();\n    $1e6a16da88d577c6$var$_canvas.pointerCtx.beginPath();\n    $1e6a16da88d577c6$var$_canvas.pointerCtx.arc(xPos, yPos, 5, 0, 2 * Math.PI, true);\n    $1e6a16da88d577c6$var$_canvas.pointerCtx.fillStyle = \"#000\";\n    $1e6a16da88d577c6$var$_canvas.pointerCtx.fill();\n    window.requestAnimationFrame($1e6a16da88d577c6$var$draw);\n};\n\n\n//# sourceMappingURL=index.8f8b341b.js.map\n","import { Gyro } from './gyro';\r\nimport { GyroCanvas } from './gyroCanvas';\r\n\r\nconst _gyroRef = new Gyro();\r\nconst _canvas = new GyroCanvas();\r\n\r\nwindow.onload = () => {\r\n  _canvas.registerParent(document.querySelector('#canvas-container'));\r\n\r\n  document.querySelector('#draw-button')?.addEventListener('pointerdown', (e) => {\r\n    _gyroRef.isDrawing = true;\r\n  });\r\n  document.querySelector('#draw-button')?.addEventListener('pointerleave', (e) => {\r\n    _gyroRef.isDrawing = false;\r\n  });\r\n  document.querySelector('#calibrate-button')?.addEventListener('pointerdown', (e) => {\r\n    _gyroRef.betaMax = 0;\r\n    _gyroRef.gammaMax = 0;\r\n    _gyroRef.isCalibrating = true;\r\n  });\r\n  document.querySelector('#calibrate-button')?.addEventListener('pointerleave', (e) => {\r\n    _gyroRef.isCalibrating = false;\r\n  });\r\n  window.requestAnimationFrame(draw);\r\n};\r\n\r\nconst draw = () => {\r\n  if (_gyroRef.isCalibrating) {\r\n    _gyroRef.calibrateMax();\r\n  }\r\n  let centerX = _canvas.squarePixels / 2;\r\n  let centerY = _canvas.squarePixels / 2;\r\n\r\n  let xPos = centerX + (_canvas.squarePixels * _gyroRef.gammaPercent) / 2;\r\n  let yPos = centerY + (_canvas.squarePixels * _gyroRef.betaPercent) / 2;\r\n  if (_gyroRef.isDrawing) {\r\n    _canvas.drawCtx.beginPath();\r\n    _canvas.drawCtx.arc(xPos, yPos, 5, 0, 2 * Math.PI, true);\r\n    _canvas.drawCtx.fillStyle = '#000';\r\n    _canvas.drawCtx.fill();\r\n  }\r\n\r\n  _canvas.pointerCtx.clearRect(0, 0, _canvas.squarePixels, _canvas.squarePixels);\r\n  _canvas.pointerCtx.beginPath();\r\n  _canvas.pointerCtx.arc(xPos, yPos, 20, 0, 2 * Math.PI, true);\r\n  _canvas.pointerCtx.strokeStyle = '#333';\r\n  _canvas.pointerCtx.stroke();\r\n\r\n  _canvas.pointerCtx.beginPath();\r\n  _canvas.pointerCtx.arc(xPos, yPos, 5, 0, 2 * Math.PI, true);\r\n  _canvas.pointerCtx.fillStyle = '#000';\r\n  _canvas.pointerCtx.fill();\r\n  window.requestAnimationFrame(draw);\r\n};\r\n","export class Gyro {\r\n  isCalibrating: boolean = false;\r\n  isDrawing: boolean = false;\r\n\r\n  betaOffset: number = 0;\r\n  gammaOffset: number = 0;\r\n  betaMax: number = 45;\r\n  gammaMax: number = 45;\r\n\r\n  beta: number = 0;\r\n  gamma: number = 0;\r\n\r\n  betaPercent: number = 0;\r\n  gammaPercent: number = 0;\r\n\r\n  constructor() {\r\n    this.calibrateCenter();\r\n    window.addEventListener(\r\n      'deviceorientation',\r\n      (e: DeviceOrientationEvent) => {\r\n        if (e.beta && e.gamma) {\r\n          this.beta = e.beta - this.betaOffset;\r\n          if (this.beta > 180) this.beta = -180 - this.beta;\r\n          else if (this.beta < -180) this.beta = -(180 - this.beta);\r\n\r\n          this.gamma = e.gamma - this.gammaOffset;\r\n          if (this.gamma > 90) this.gamma = -90 - this.gamma;\r\n          else if (this.gamma < -90) this.gamma = -(90 - this.gamma);\r\n\r\n          this.betaPercent = 0;\r\n          if (this.beta < 0) this.betaPercent = Math.max(-this.betaMax, this.beta) / this.betaMax;\r\n          else if (this.beta > 0) this.betaPercent = Math.min(this.betaMax, this.beta) / this.betaMax;\r\n\r\n          this.gammaPercent = 0;\r\n          if (this.gamma < 0) this.gammaPercent = Math.max(-this.gammaMax, this.gamma) / this.gammaMax;\r\n          else if (this.gamma > 0) this.gammaPercent = Math.min(this.gammaMax, this.gamma) / this.gammaMax;\r\n        }\r\n      },\r\n      false\r\n    );\r\n  }\r\n\r\n  calibrateCenter() {\r\n    window.addEventListener(\r\n      'deviceorientation',\r\n      (e: DeviceOrientationEvent) => {\r\n        this.betaOffset = e.beta ?? 0;\r\n        this.gammaOffset = e.gamma ?? 0;\r\n      },\r\n      { once: true }\r\n    );\r\n  }\r\n\r\n  calibrateMax() {\r\n    this.betaMax = Math.max(this.betaMax, Math.abs(this.betaMax));\r\n    this.gammaMax = Math.max(this.gammaMax, Math.abs(this.gammaMax));\r\n  }\r\n}\r\n","export class GyroCanvas {\r\n  readonly squarePixels = 1000;\r\n  drawCtx: CanvasRenderingContext2D;\r\n  pointerCtx: CanvasRenderingContext2D;\r\n  constructor() {\r\n    const drawLayer = document.createElement('canvas');\r\n    const pointerLayer = document.createElement('canvas');\r\n    this.drawCtx = drawLayer.getContext('2d') as CanvasRenderingContext2D;\r\n    this.pointerCtx = pointerLayer.getContext('2d') as CanvasRenderingContext2D;\r\n    // Assign canvas pixel size\r\n    drawLayer.height = drawLayer.width = pointerLayer.height = pointerLayer.width = this.squarePixels;\r\n    drawLayer.className = pointerLayer.className = 'canvas';\r\n    drawLayer.id = 'canvas';\r\n    pointerLayer.id = 'pointerCanvas';\r\n  }\r\n\r\n  registerParent = (parent: Element | null) => {\r\n    if (parent) {\r\n      const parentElement = parent as HTMLElement;\r\n      const cssSize = Math.min(window.innerHeight, window.innerWidth);\r\n      parentElement.style.setProperty('--canvas-size', cssSize + 'px');\r\n      parent.appendChild(this.drawCtx.canvas);\r\n      parent.appendChild(this.pointerCtx.canvas);\r\n    }\r\n  };\r\n}\r\n"],"names":["$1e6a16da88d577c6$var$_gyroRef","constructor","isCalibrating","isDrawing","betaOffset","gammaOffset","betaMax","gammaMax","beta","gamma","betaPercent","gammaPercent","calibrateCenter","window","addEventListener","e","Math","max","min","once","calibrateMax","abs","$1e6a16da88d577c6$var$_canvas","squarePixels","registerParent","parent","cssSize","innerHeight","innerWidth","parentElement","style","setProperty","appendChild","drawCtx","canvas","pointerCtx","drawLayer","document","createElement","pointerLayer","getContext","height","width","className","id","onload","querySelector","requestAnimationFrame","$1e6a16da88d577c6$var$draw","centerX","centerY","xPos","yPos","beginPath","arc","PI","fillStyle","fill","clearRect","strokeStyle","stroke"],"version":3,"file":"index.8f8b341b.js.map"}